const express = require('express'); //Line 1
const app = express(); //Line 2
const port = process.env.PORT || 5000; //Line 3

var cors = require('cors')

app.use(cors()) // Use this after the variable declaration

// This displays message that the server running and listening to specified port
app.listen(port, () => console.log(`Listening on port ${port}`)); //Line 6

// create a GET route
app.get('/deal_list', (req, res) => { //Line 9
  res.json(DealsListData) //send({ express: 'YOUR EXPRESS BACKEND IS CONNECTED TO REACT' }); //Line 10
}); //Line 11




app.get('/deals_list_by_id', function (req, res) {

  var sql = require("mssql");
  // console.log("Started")
  // config for your database
  // var config = {
  //     user: 'sa',
  //     password: 'get2Tahiti',
  //     server: 'localhost', 
  //     database: 'SuperDeals2016' 
  // };

  var config = {
    server: 'localhost',
    authentication: {
      type: 'default',
      options: {
        userName: 'sa', // update me
        password: 'get2Tahiti' // update me
      }
    },
    options: {
      database: 'SuperDeals2016',
      validateBulkLoadParameters: false,
      encrypt: false,
    }
  }

  // connect to your database
  sql.connect(config, function (err) {

    if (err) console.log(err);

    // create Request object
    var request = new sql.Request();

    // query to the database and get the records
    request.query("select top 100 * from dealslist", function (err, recordset) {

      if (err) console.log(err)
      // console.log(recordset)
      // send records as a response
      res.send(recordset);

    });
  });
});


  let DealsListData =
  [
    {
      "Price": "$178.88",
      "ListPrice": "$999.99",
      "Title": "        Wi-Fi Mini Projectors,150 ANSI Lumen Portable Projector,Native 1080p Full HD Resolution,110 Inch Picture,Movie Projector       ",
      "Feature": [
        "【Mini and Portable】The Mini Portable Projector are Suitable for Photos Sharing, Playing Videos, Watching Football &amp; Basketball Matches, etc. It can Hold it in Just One Palm that is Very Convenient, Definitely the Best Choice for Outdoor Movies.",
        "【Home Theater Projector】Upgraded Mini Projector Equipped with a 1000:1 Contrast Ratio and is Supported 4K Full HD Resolution Videos that Brings You a Premium Home Cinema Experience Similar Projectors in the Market. It Provides You with Bigger Screen and Clearer Images when Watching TV, Watching Movies, Playing PS4/X-Box Games.",
        "【Built-in Stereo Speakers】The Smart WiFi Projector has 7500K Color Temperature and Adjustable Brightness. Built-in Stereo Speakers, Brings a Clear and Well Balanced Sound, which will Give You a Shock Experience.",
        "【Multiple Devices Connection】The Pico Projector is Supported Android Wireless, iOS Wireless, Cool-USB Mirroring Connection. It also can be Easily Connected with Laptops, Smartphones, Tablets, TV Sticks, USB Drives, etc.",
        "【Warranty】We Will Provide 12 Months Free Warranty, and Professional Customer Service."
      ],
      "Category": "Electronics",
      "ImgUrl": "https://m.media-amazon.com/images/I/61+Fw2ZxiEL._AC_SL1500_.jpg",
      "Error": null,
      "ExpiresToday": false,
      "ASIN": "B09V4RYCXF"
    },
    {
      "Price": "$26.99",
      "ListPrice": "$39.99",
      "Title": "        Lydaz Bubble Lawn Mower for Toddlers, Kids Bubble Blower Maker Machine, Summer Outdoor Push Toys, Easter Basket Stuffers Birthday Toys Gifts for Preschool Baby Boys Girls       ",
      "Feature": [
        "The push mower features realistic sounds and bubble maker, which encourages pretend garden play, bring tons of bubbles.",
        "The handle is very flexible and easy to take apart for storage. Bright color mower body is attractive for your kids.",
        "Automatic bubble blowing gardening mower tool, pushing toys for baby, inspire your kids love sport, love walking outside.",
        "Outdoor summer garden yard mowing with bubbles fun.Ideal 1st Birthday Easter basket stuffers for boys girls age 2 3 and 18 months.",
        "Includes 1 bubble mower, 3 bubble solutions, 3 bubble sticks. 3 AA batteries required(Not included)."
      ],
      "Category": "Toys & Games",
      "ImgUrl": "https://m.media-amazon.com/images/I/71Zvn0rRMwL._AC_SL1200_.jpg",
      "Error": null,
      "ExpiresToday": false,
      "ASIN": "B07H331J4R"
    },
    {
      "Price": "$28.00",
      "ListPrice": "$49.95",
      "Title": "        Ice Cream Roller Plate-Anti-Griddle Pan with 2 Spatulas for Easy Homemade Rolled Ice Cream, Gelato, Sorbet-Frozen Treat Maker by Classic Cuisine       ",
      "Feature": [
        "FUN AND EASY - This instant ice cream maker is fun and easy for anyone to use! Place the pan in the freezer for 24 hours before the first use, put ½ Cup of your mixture onto the tray, let sit for 1-2 minutes then roll your ice cream off with the spatula.",
        "SPATULAS INCLUDED - The freeze griddle comes with two specially designed spatulas included to neatly roll your ice cream off the tray. The ice cream rolls are a pretty way to present your homemade treats; adults and kids will love them!",
        "ENDLESS POSSIBILITIES - This versatile piece of kitchenware is perfect for making fresh ice cream, Thai fried ice cream, gelato, sorbet, or frozen yogurt, and can even be used as an anti-griddle for candy or savory foods.",
        "GREAT GIFT - The ice cream roller plate is a fun gift for weddings, holidays, housewarmings, birthdays, or any occasion! Your foodie friends and family would love this awesome pan that allows them to make delicious frozen treats!",
        "PRODUCT DETAILS - Materials: Freezing Surface-Food Grade Aluminum, Casing and 2 Spatulas-Food safe plastic. Dimensions: Tray- (L)12.25”x(W)9”x(H)2.25”, Spatulas-(L)8”x(W)3.5”. Let freezing pan to come to room temperature, hand wash, dry- do not allow tray to sit in water."
      ],
      "Category": "Home & Kitchen",
      "ImgUrl": "https://m.media-amazon.com/images/I/81qMoCRH+zL._AC_SL1500_.jpg",
      "Error": null,
      "ExpiresToday": false,
      "ASIN": "B07FT5JS24"
    }
  ]
